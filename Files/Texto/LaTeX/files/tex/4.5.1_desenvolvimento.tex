\chapter{Desenvolvimento} \label{chap:desenvolvimento}

Para o desenvolvimento do presente trabalho, foram utilizadas diversas ferramentas, tanto para a elaboração do código, quanto para a elaboração do modelo de banco de dados e do sistema de criação de tabelas horárias.

\section{Projetos anteriores} % ### 5.1.

Antes do desenvolvimento do presente trabalho, foram feitos alguns projetos pessoais que serviram como base motivadora para o desenvolvimento do presente trabalho.

\subsection{Andamento dos alunos} % #### 5.1.1

Como interesse próprio, cogitou-se o desenvolvimento de uma plataforma onde se pudesse ver em que ponto os alunos se encontram em relação ao andamento de seus cursos. Para isso, seria necessária a obtenção dos dados dos alunos, seja por parte dos mesmos, do coordenador ou por integração com o sistema acadêmico. Com estes dados, seria possível criar uma interface que mostrasse o andamento dos alunos, quais matérias já foram cursadas, quais estão sendo cursadas e quais ainda faltam. Além disso, seria possível mostrar quais matérias são pré-requisitos para outras. Assim, o aluno e a coordenação poderiam ter uma visão geral de seu andamento e de quais matérias ele precisará cursar para se formar. Infelizmente esse projeto não saiu do mundo das ideias. Entretanto, lá permaneceu sendo maturado.

\begin{MyCenteredFigure}
  \caption{Andamento do aluno no Sistema Acadêmico}
  \label{fig:andamento}
  \includegraphics[width=\textwidth]{files/img/Desenvolvimento/Progressão}
\end{MyCenteredFigure}

Anos após a idealização dessa funcionalidade, o Sistema Acadêmico da UENF passou a disponibilizar uma funcionalidade semelhante, como pode ser visto na \autoref{fig:andamento}. Nela, é possível ver o andamento do aluno por período, incluindo as disciplinas Eletivas Livres e Eletivas Optativas. Entretanto, essa visualização tabular não ilustra o andamento de todos os alunos simultaneamente, sendo necessário navegar individualmente por cada um deles.

\subsection{Cálculo de demanda} % #### 5.1.2.

Ao longo dos semestres, foi percebido que durante o intervalo entre os semestres, os alunos precisam se inscrever nas matérias que desejam cursar no semestre seguinte. Para isso, é necessário que o coordenador saiba quantos alunos estão interessados em cada matéria para que ele possa definir quantas turmas serão abertas. Com este fim em mente, o coordenador dispõe de algumas alternativas como estimar quantos alunos se inscreverão em cada disciplina, checar manualmente no sistema acadêmico quais alunos podem fazer cada matéria, ou então obter diretamente dos alunos através de um formulário em quais disciplinas cada um dos alunos tem a intenção de cursar.

O método que o atual Coordenador de Ciência da Computação utiliza consiste em baixar o extrato de todos os alunos do curso e tabelar no Excel qual é o andamento de cada um dos alunos, para que assim, através da análise manual, pudesse ver qual é o andamento de cada um e de quantos alunos demandam quais disciplinas.

Entretanto, todas essas alternativas são trabalhosas e propensas a erros. Sendo assim, foi pensado em uma forma de automatizar esse processo. Foi então elaborado um código em \href{https://www.python.org/}{Python} que atualmente \href{https://github.com/jvfd3/university_demand}{se encontra no GitHub}. Este código tem como entrada os extratos de matrícula dos alunos e como saída a listagem das disciplinas demandadas e a listagem dos alunos que demandam cada disciplina.

\lstinputlisting[language={Python}, captionpos={t}, label={code:demand}, caption={Obter demanda por extratos em PDF}]{files/codigos/demanda.py}

Este código foi desenvolvido em 8 etapas, vistas no \autoref{code:demand}, cada uma com um arquivo separado. Para alcançar a lista das demandas, é necessário primeiro obter a lista dos arquivos em formato PDF que serão processados, em seguida extrair seus dados com a biblioteca \href{https://pypi.org/project/pdfminer/}{\textit{PDFMiner}}, estruturar os dados obtidos, filtrar os dados estruturados, obter a demanda de cada disciplina, juntar as demandas de cada disciplina e salvar os dados obtidos em um arquivo de texto.

Embora o código cumpra com seu objetivo, apresenta algumas características limitantes. A primeira é que os PDFs precisam ser obtidos manualmente, um por um, pelo coordenador, sendo ela por si só uma tarefa extenuante, o que não é desejado. Além disso, o seu uso não é muito intuitivo, sendo necessário que o usuário lide com o prompt de comando e instale as dependências necessárias, o que acaba trazendo uma dificuldade a mais ao usuário. O código também apresenta limitações por sistema operacional, não sendo garantido o seu funcionamento em sistemas operacionais diferentes do Windows.

Com estes empecilhos, o código acabou abandonado, visto que apesar de útil, não se mostrou prático e intuitivo o suficiente para ser utilizado.

\section{Dados pessoais e a LGPD} % ### 5.2.

Em sua concepção original, o presente trabalho visaria integrar o sistema desenvolvido com o atual sistema acadêmico da UENF. Essa abordagem foi descartada devido às dificuldades encontradas por parte do setor administrativo da UENF que, devido à \href{https://www.planalto.gov.br/ccivil_03/_ato2015-2018/2018/lei/l13709.htm}{Lei Geral de Proteção dos Dados (LGPD)}, não podem divulgar dados dos alunos, mesmo anonimizados.

Para confirmação das informações recebidas, a \href{https://www.planalto.gov.br/ccivil_03/_ato2015-2018/2018/lei/l13709.htm}{LGPD} foi estudada e talvez o presente estudo recaísse na alínea b do inciso 2º do artigo 4º do capítulo 1 da Lei Nº 13.709, de 14 de agosto de 2018. Informando este que esta lei, a LGPD, não se aplica ao tratamento de dados pessoais realizado para fins exclusivamente acadêmicos.

Segundo o \href{https://www.gov.br/anpd/pt-br/assuntos/noticias/sei_00261-000810_2022_17.pdf}{Estudo Técnico sobre o tratamento de dados pessoais para fins acadêmicos}, é reforçado que ``o tratamento de dados pessoais para fins acadêmicos deve ser sempre lícito''.

Apesar das possibilidades de meios legalmente válidos para a aquisição dos dados, optou-se por abandonar a integração com o Sistema Acadêmico e o uso de dados reais dos alunos já existentes na plataforma. Rumando-se então para uma abordagem mais manual de inserção de dados manualmente por parte dos usuários do sistema.

\section{Prototipagem} % ### 5.3.

A criação de protótipos, seguindo a abordagem tomada por \cite{andre_interaction_2018}, se mostra como essencial para que se mantenha a constante satisfação por parte dos \textit{stakeholders} e quais mudanças sugerem ao desenvolvimento do projeto, assim reduzindo a necessidade de retrabalho ou de não alcance das expectativas do projeto. Para este fim, foram feitos os designs iniciais das telas do sistema usando o software de design \href{https://www.figma.com/}{Figma}.

\subsection{Protótipos de componentes} % #### 5.3.1.

Antes de seguir com a descrição das telas, é válido descrever os componentes que foram utilizados na construção dos protótipos. A \autoref{fig:cartão_de_turma} mostra os cartões de turma que foram utilizados para representar as turmas criadas. O objetivo desses cartões é de apresentar de forma compacta o máximo possível de informações relevantes ao usuário.

\begin{MyCenteredFigure}
  \caption{Protótipos de cartões de turma}
  \label{fig:cartão_de_turma}
  % \hfill
  \begin{minipage}{0.48\textwidth} \centering
    \includegraphics[width=\textwidth]{files/img/Desenvolvimento/Cartões/PadraoClassCards}
    \vspace{1mm} \vfill
    \includegraphics[width=\textwidth]{files/img/Desenvolvimento/Cartões/Smaller ColapsadaClassCards}
  \end{minipage}
  \hfill
  \begin{minipage}{0.48\textwidth} \centering
    \includegraphics[width=\textwidth]{files/img/Desenvolvimento/Cartões/Professor SuperiorClassCards}
    \vspace{1mm} \vfill
    \includegraphics[width=\textwidth]{files/img/Desenvolvimento/Cartões/SmallestClassCards}
  \end{minipage}
\end{MyCenteredFigure}

Dentre essas informações, temos principalmente o código da disciplina e o nome do professor. Quando alocada à uma sala, temos também o código da sala acrescida do prédio onde a sala se encontra. Além disso, no canto inferior direito, temos a quantidade de alunos que demandam a disciplina, ou seja, aqueles que a podem cursar de acordo com seus requisitos. Ao seu lado, caso ocorram, estão indicados o alerta de alunos conflituosos, sendo esses os alunos que demandam outra disciplina no mesmo horário em que esta turma está alocada.

Neste cartão, estão presentes também três botões: \textbf{travar}, \textbf{editar} e \textbf{expandir}/\textbf{recolher}. O botão de \textbf{travar} tem como função fixar a turma no horário em que ela se encontra, impedindo que ela seja movida. O botão de \textbf{editar} tem como função abrir um painel onde é possível alterar as informações da turma. O botão de \textbf{expandir}/\textbf{recolher} tem como função expandir ou recolher o cartão, mostrando ou escondendo informações adicionais.

\begin{MyCenteredFigure}
  \caption{Protótipos de Caixas de Seleção}
  \label{fig:selects}
  \begin{minipage}{0.48\textwidth} \centering
    \includegraphics[width=\textwidth]{files/img/Desenvolvimento/SingleSelect.pdf}
  \end{minipage}
  \begin{minipage}{0.48\textwidth} \centering
    \includegraphics[width=\textwidth]{files/img/Desenvolvimento/MultiSelect.pdf}
  \end{minipage}
\end{MyCenteredFigure}

A \autoref{fig:selects} mostra os protótipos de caixas de seleção que foram utilizados para a seleção de dados. Na primeira caixa de seleção o usuário pode selecionar apenas uma opção. Já na segunda caixa de seleção o usuário pode selecionar várias opções.

\subsection{Protótipos de páginas} % #### 5.3.1.

A primeira, e principal, é a ilustrada pela \autoref{fig:main} que permite que o usuário arraste todas as turmas listadas até o horário desejado. A listagem das turmas a serem distribuídas é disposta em um painel à esquerda. Este painel tem como funcionalidade, fixar as turmas ainda não alocadas, como se estivessem presas por \href{https://en.wikipedia.org/wiki/Hook-and-loop_fastener}{fechos de gancho e laço}. Assim, dispondo de um local para que turmas que turmas em processo de mudança de horário sejam armazenadas temporariamente sem que sejam perdidas.

\begin{MyCenteredFigure}
  \caption{Página principal do sistema}
  \label{fig:main}
  \includegraphics[width=0.8\textwidth]{files/img/Prototipo/Medio/main}
\end{MyCenteredFigure} % Main

Em seguida, temos a tela de seleção da categoria dos dados que deseja-se modificar (\autoref{fig:CRUD_main}), podendo esses serem sobre as turmas, salas, disciplinas, professores ou alunos. Cada uma destas tendo a capacidade de criação, leitura, edição e deleção dos dados.

\begin{MyCenteredFigure}
  \caption{Página principal de modificação dos dados}
  \label{fig:CRUD_main}
  \includegraphics[width=0.8\textwidth]{files/img/Prototipo/Medio/CRUD_main}
\end{MyCenteredFigure} % CRUD_main

Quanto à página das salas, tempos primeiro a seleção da sala na qual deseja-se fazer alterações de cadastro. Abaixo desta caixa de seleção única há um filtro de visualização das alocações de determinado ano e semestre. Nessa página pode-se também registrar algumas características da sala, como a quantidade de cadeiras e computadores, e se possui monitor, projetos, quadro de giz e quadro branco. Um exemplo de sala ainda sem turmas alocadas é representado na \autoref{fig:CRUD_salas-vazias}. Essas últimas informações, embora não sejam essenciais para a alocação das turmas, podem ser úteis como forma de filtragem para a alocação de turmas, visto que certas disciplinas demandam salas com características específicas.

\begin{MyCenteredFigure}
  \caption{Página de modificação das informações de salas}
  \label{fig:CRUD_salas-vazias}
  \includegraphics[width=0.8\textwidth]{files/img/Prototipo/Medio/CRUD_salas-vazias}
\end{MyCenteredFigure} % CRUD_salas-vazias

Na página dos alunos, pode-se cadastrar novos alunos informando o seu ano de entrada e a sua matrícula. Abaixo temos a visualização da grade, onde pode-se classificar cada uma das disciplinas como aprovada, reprovada e cursando. O exemplo da \autoref{fig:CRUD_alunos} mostra a grade de um aluno inscrito em 2019.1.

\begin{MyCenteredFigure}
  \caption{Página de modificação das informações de alunos}
  \label{fig:CRUD_alunos}
  \includegraphics[width=0.8\textwidth]{files/img/Prototipo/Medio/CRUD_alunos}
\end{MyCenteredFigure} % CRUD_alunos

Podemos definir na página das disciplinas qual seu código, nome, e o seu período esperado segundo a ementa. Além dessas informações, pode-se cadastrar quais cursos a possuem em suas ementas, quais seus pré-requisitos, os professores que a ministram e quais requisitos a mesma possui em relação às características de sala. A \autoref{fig:CRUD_disciplinas} mostra a página de modificação de disciplinas.

\begin{MyCenteredFigure}
  \caption{Página de modificação das informações de disciplinas}
  \label{fig:CRUD_disciplinas}
  \includegraphics[width=0.8\textwidth]{files/img/Prototipo/Medio/CRUD_disciplinas}
\end{MyCenteredFigure} % CRUD_disciplinas

Na página de professores (\autoref{fig:CRUD_professores}), temos a relação de disciplinas que os mesmos estão passíveis de ministrar, e também quais são suas preferências de horários ao longo da semana. Embora não seja essencial, essa informação pode ser útil para a alocação de turmas, pois alguns professores podem ter preferência, ou até mesmo não estarem disponíveis para ministrar aulas em determinados horários. Um exemplo deste caso seriam os bolsistas para docência complementar, dado que os mesmos podem estar também vinculados a outras instituições. E nesses casos, aquele que estiver desenvolvendo a grade horária pode alocar as turmas de acordo com a disponibilidade dos professores.

\begin{MyCenteredFigure}
  \caption{Página de modificação}
  \label{fig:CRUD_professores}
  \includegraphics[width=0.8\textwidth]{files/img/Prototipo/Medio/CRUD_professores}
\end{MyCenteredFigure} % CRUD_professores

Por fim, na \autoref{fig:CRUD_turmas}, temos a junção de todas as informações registradas acima. Nela, podemos informar o momento exato de sua execução, definindo o ano, semestre, dia, hora de início e duração em que será ministrada. Também é necessário que seja definido em que sala cada um de seus horários estará alocada. Além de informar, também, qual professor a lecionará e a qual disciplina ela se refere.

\begin{MyCenteredFigure}
  \caption{Página de modificação das informações de turmas}
  \label{fig:CRUD_turmas}
  \includegraphics[width=0.8\textwidth]{files/img/Prototipo/Medio/CRUD_turmas}
\end{MyCenteredFigure} % CRUD_turmas

Na \autoref{fig:CRUD_turmas} temos alguns exemplos de conflitos percebidos. O primeiro, com a cor amarelada, informado que o tempo de duração do segundo horário da turma não condiz com a preferência pessoal do professor selecionado. Este conflito não é impeditivo, entretanto, se possível, um outro horário poderia ser encontrado para atender melhor às preferências do professor.

Outro conflito exibido é que a sala em que está alocado o primeiro horário da turma já está ocupada no mesmo horário por outra turma. Este conflito é impeditivo, sendo então representado na cor vermelha. Neste caso, a turma deve ser realocada para outro horário ou sala.

Por último, na listagem dos alunos demandantes, temos quatro alunos marcados em vermelho. Estes alunos demandam outra disciplina no mesmo horário em que esta turma está alocada. Este conflito é impeditivo, mas apenas para os alunos, assim como no caso da preferência do professor, a turma pode ser realocada para outro horário para atender melhor às demandas dos alunos.
